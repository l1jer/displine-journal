# 跨域

> 因为在学习写端口的时候遇到了跨域的问题, 不知道跨域到底是什么, 特地了解了下.

造成跨域的两种策略

同源策略限制内容有：

- Cookie、LocalStorage、IndexedDB 等存储性内容
- DOM 节点
- AJAX 请求发送后，结果被浏览器拦截了

但是有三个标签是允许跨域加载资源：

`<img src=XXX>`, `<link href=XXX>`, `<script src=XXX>`

**浏览器的同源策略会导致跨域, 同源策略分为以下两种:**

1. DOM 同源策略: 禁止对不同源页面 DOM 进行操作,主要为 iframe 跨域的情况, 不同域名的 iframe 是限制互相访问的;
2. XMLHttpRequest 同源策略:禁止使用 XHR 对象向不同源的服务器地址发起 HTTP 请求

那么只要协议, 域名和端口有任何一个不同, 都被当做是不同域, 之间的请求就是跨域操作.

> 同域: 相同域名/端口/协议

## 为什么要有跨域限制?

为了安全考虑. 比如 AJAX 和 DOM 同源策略, 主要用来防止 CSRF 攻击

## 跨域的解决方式

### 跨域资源共享

### jsonp 实现跨域

### 服务器代理

### document.domain 跨子域

### location.hash 跨域

### postMessage 实现页面之间通信
